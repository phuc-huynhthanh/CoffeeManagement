<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="/assets/admin.png" type="image/png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Qu·∫£n l√Ω t√†i kho·∫£n nh√¢n vi√™n</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Toast Container */
    #toastContainer {
      position: fixed;
      top: 80px;
      right: 20px;
      z-index: 9999;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* Toast Base */
    .toast {
      min-width: 300px;
      max-width: 400px;
      padding: 16px 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      display: flex;
      align-items: center;
      gap: 12px;
      animation: slideIn 0.3s ease-out;
      transition: all 0.3s ease;
    }

    .toast:hover {
      transform: translateX(-5px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    /* Toast Types */
    .toast-success {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
    }

    .toast-error {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      color: white;
    }

    .toast-warning {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color: white;
    }

    .toast-info {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
    }

    /* Toast Icon */
    .toast-icon {
      font-size: 24px;
      flex-shrink: 0;
    }

    /* Toast Content */
    .toast-content {
      flex: 1;
      font-size: 14px;
      line-height: 1.5;
      font-weight: 500;
    }

    /* Toast Close Button */
    .toast-close {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      transition: background 0.2s;
      flex-shrink: 0;
    }

    .toast-close:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    /* Animation */
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(400px);
        opacity: 0;
      }
    }

    .toast-exit {
      animation: slideOut 0.3s ease-in forwards;
    }

    .parent-tab.active { background-color: rgba(255,255,255,0.15); }
    .child-tab.active { background-color: rgba(255,255,255,0.25); }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

  <!-- Toast Container -->
  <div id="toastContainer"></div>
  
  <!-- Header -->
  <header class="bg-blue-600 text-white py-4 shadow-md fixed top-0 left-0 w-full z-50">
    <div class="px-4 mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-semibold">Trang qu·∫£n tr·ªã</h1>
        
      <div class="flex items-center space-x-3">
        <span id="username" class="font-medium pr-3">üë§ ƒêang t·∫£i...</span>
        <button id="logoutBtn" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg">ƒêƒÉng xu·∫•t</button>
      </div>
    </div>
  </header>

   <div class="flex flex-1 mt-12">

<aside class="w-64 bg-blue-600 text-white flex flex-col pt-4">
  <nav class="flex-1 overflow-y-auto mt-2">
    <ul class="space-y-2 px-4">
      <!-- Nh√≥m: Qu·∫£n l√Ω s·∫£n ph·∫©m -->
      <li>
        <a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 parent-tab active" data-parent="san-pham">
          Qu·∫£n l√Ω s·∫£n ph·∫©m
        </a>
        <ul class="space-y-2 px-4 mt-2 child-list" data-parent-list="san-pham">
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab active" data-tab="san-pham">- S·∫£n ph·∫©m</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="loai-san-pham">- Lo·∫°i s·∫£n ph·∫©m</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="combo">- Combo</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="ban">- B√†n</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="kich-co">- K√≠ch c·ª°</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="topping">- Topping</a></li>
        </ul>
      </li>

      <!-- Nh√≥m: Qu·∫£n l√Ω t√†i kho·∫£n nh√¢n vi√™n -->
      <li>
        <a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 parent-tab" data-parent="nhan-vien">
          Qu·∫£n l√Ω t√†i kho·∫£n nh√¢n vi√™n
        </a>
        <ul class="space-y-2 px-4 mt-2 child-list hidden" data-parent-list="nhan-vien">
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="tai-khoan">- T√†i kho·∫£n nh√¢n vi√™n</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="lich-lam">- L·ªãch l√†m</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="thuong-phat">- Th∆∞·ªüng/Ph·∫°t</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="luong">- L∆∞∆°ng</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="doanh-thu">- Doanh thu</a></li>
        </ul>
      </li>

      <!-- Nh√≥m: Qu·∫£n l√Ω th√†nh vi√™n -->
      <li>
        <a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 parent-tab" data-parent="thanh-vien">
          Qu·∫£n l√Ω th√†nh vi√™n
        </a>
        <ul class="space-y-2 px-4 mt-2 child-list hidden" data-parent-list="thanh-vien">
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="thanh-vien">- Th√†nh vi√™n</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="bac-thanh-vien">- B·∫≠c th√†nh vi√™n</a></li>
          <li><a href="#" class="block py-2 px-3 rounded hover:bg-blue-500 child-tab" data-tab="khuyen-mai">- Khuy·∫øn m√£i</a></li>
        </ul>
      </li>

      <!-- B·∫°n c√≥ th·ªÉ ƒë·ªÉ ‚ÄúQu·∫£n l√Ω ƒë∆°n h√†ng‚Äù l√† m·ªôt m·ª•c ri√™ng kh√¥ng c√≥ tab con -->
      <li>
        <a href="#orders-alone" class="block py-2 px-3 rounded hover:bg-blue-500">Qu·∫£n l√Ω ƒë∆°n h√†ng</a>
      </li>
    </ul>
  </nav>
</aside>

  <!-- Main -->
<main class="flex-1 container mx-auto px-6 py-8">
  <!-- Parent: Qu·∫£n l√Ω s·∫£n ph·∫©m -->
  <section id="parent-san-pham" class="parent-section">
    <!-- Tab: Qu·∫£n l√Ω s·∫£n ph·∫©m -->
    <div id="tab-san-pham" class="tab-content active">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω s·∫£n ph·∫©m</h2>
        <button id="btnAddProduct" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow-md">
          + Th√™m s·∫£n ph·∫©m
        </button>
      </div>
      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">T√™n s·∫£n ph·∫©m</th>
              <th class="px-4 py-3 border-b">Lo·∫°i</th>
              <th class="px-4 py-3 border-b">Gi√°</th>
              <th class="px-4 py-3 border-b">H√¨nh ·∫£nh</th>
              <th class="px-4 py-3 border-b">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="productTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>

    <!-- Tab: Qu·∫£n l√Ω Lo·∫°i s·∫£n ph·∫©m -->
    <div id="tab-loai-san-pham" class="tab-content hidden">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω Lo·∫°i s·∫£n ph·∫©m</h2>
        <button id="btnAddProductType" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg shadow-md">
          + Th√™m lo·∫°i s·∫£n ph·∫©m
        </button>
      </div>
      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">T√™n lo·∫°i s·∫£n ph·∫©m</th>
              <th class="px-4 py-3 border-b text-center">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="productTypeTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>

    <!-- Tab: Qu·∫£n l√Ω Combo -->
    <div id="tab-combo" class="tab-content hidden">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω Combo</h2>
        <button id="btnAddCombo" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg shadow-md">
          + Th√™m combo
        </button>
      </div>
      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">T√™n combo</th>
              <th class="px-4 py-3 border-b">Gi√°</th>
              <th class="px-4 py-3 border-b">S·∫£n ph·∫©m</th>
              <th class="px-4 py-3 border-b">Tr·∫°ng th√°i</th>
              <th class="px-4 py-3 border-b">H√¨nh ·∫£nh</th>
              <th class="px-4 py-3 border-b">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="comboTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>

    <!-- Tab: Qu·∫£n l√Ω b√†n -->
    <div id="tab-ban" class="tab-content hidden">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω b√†n</h2>
        <button id="btnAddTable" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg shadow-md">+ Th√™m b√†n</button>
      </div>
      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">T√™n b√†n</th>
              <th class="px-4 py-3 border-b">Tr·∫°ng th√°i</th>
              <th class="px-4 py-3 border-b text-center">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="tableTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>

    <!-- Tab: Qu·∫£n l√Ω k√≠ch c·ª° -->
    <div id="tab-kich-co" class="tab-content hidden">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω k√≠ch c·ª°</h2>
        <button id="btnAddSize" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg shadow-md">+ Th√™m k√≠ch c·ª°</button>
      </div>
      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">T√™n k√≠ch c·ª°</th>
              <th class="px-4 py-3 border-b">Gi√° th√™m (ƒë)</th>
              <th class="px-4 py-3 border-b text-center">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="sizeTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>

    <!-- Tab: Qu·∫£n l√Ω topping -->
    <div id="tab-topping" class="tab-content hidden">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω topping</h2>
        <button id="btnAddTopping" class="bg-pink-600 hover:bg-pink-700 text-white px-4 py-2 rounded-lg shadow-md">+ Th√™m topping</button>
      </div>
      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">T√™n topping</th>
              <th class="px-4 py-3 border-b">Gi√° th√™m (ƒë)</th>
              <th class="px-4 py-3 border-b text-center">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="toppingTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- Parent: Qu·∫£n l√Ω t√†i kho·∫£n nh√¢n vi√™n -->
  <section id="parent-nhan-vien" class="parent-section hidden">
    <!-- Tab: Qu·∫£n l√Ω t√†i kho·∫£n nh√¢n vi√™n -->
    <div id="tab-tai-khoan" class="tab-content active">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω t√†i kho·∫£n nh√¢n vi√™n</h2>
        <button id="btnAdd" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow-md">
          + Th√™m t√†i kho·∫£n
        </button>
      </div>
      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">H·ªç t√™n</th>
              <th class="px-4 py-3 border-b">S·ªë ƒëi·ªán tho·∫°i</th>
              <th class="px-4 py-3 border-b">Email</th>
              <th class="px-4 py-3 border-b">L∆∞∆°ng CB</th>
              <th class="px-4 py-3 border-b">Vai tr√≤</th>
              <th class="px-4 py-3 border-b">T√™n ƒëƒÉng nh·∫≠p</th>
              <th class="px-4 py-3 border-b">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="accountTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>

    <!-- Tab L·ªãch l√†m -->
<div id="tab-lich-lam" class="tab-content hidden">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">üìÖ Qu·∫£n l√Ω l·ªãch l√†m vi·ªác</h2>
    
    <!-- Th·ªëng k√™ -->
    <div id="scheduleStats" class="mb-6">
        <div class="grid grid-cols-2 md:grid-cols-5 gap-4">
            <div class="bg-blue-100 p-4 rounded-lg text-center hover:shadow-lg transition">
                <div class="text-3xl font-bold text-blue-700" id="statTotal">0</div>
                <div class="text-sm text-blue-600 font-medium">T·ªïng ca</div>
            </div>
            <div class="bg-green-100 p-4 rounded-lg text-center hover: shadow-lg transition">
                <div class="text-3xl font-bold text-green-700" id="statFilled">0</div>
                <div class="text-sm text-green-600 font-medium">ƒê·ªß NV (‚â•3)</div>
            </div>
            <div class="bg-red-100 p-4 rounded-lg text-center hover:shadow-lg transition">
                <div class="text-3xl font-bold text-red-700" id="statUnderstaffed">0</div>
                <div class="text-sm text-red-600 font-medium">Thi·∫øu NV (&lt;3)</div>
            </div>
            <div class="bg-orange-100 p-4 rounded-lg text-center hover:shadow-lg transition">
                <div class="text-3xl font-bold text-orange-700" id="statFull">0</div>
                <div class="text-sm text-orange-600 font-medium">ƒê·∫ßy ca (9/9)</div>
            </div>
            <div class="bg-gray-100 p-4 rounded-lg text-center hover:shadow-lg transition">
                <div class="text-3xl font-bold text-gray-700" id="statEmpty">0</div>
                <div class="text-sm text-gray-600 font-medium">Tr·ªëng</div>
            </div>
        </div>
    </div>

    <!-- B·ªô l·ªçc tu·∫ßn -->
    <div class="bg-white p-4 rounded-lg shadow-md mb-4">
        <div class="flex flex-wrap gap-4 items-end">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">Ch·ªçn tu·∫ßn</label>
                <input type="week" id="weekPicker" onchange="loadScheduleByWeek()" 
                       class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white">
            </div>
            <div class="flex gap-2 flex-wrap">
                <button onclick="goToPreviousWeek()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition font-medium flex items-center gap-2">
                    <span>‚Üê</span> Tu·∫ßn tr∆∞·ªõc
                </button>
                <button onclick="loadScheduleByWeek()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition font-medium flex items-center gap-2">
                    <span>üîÑ</span> T·∫£i l·∫°i
                </button>
                <button onclick="goToNextWeek()" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition font-medium flex items-center gap-2">
                    Tu·∫ßn sau <span>‚Üí</span>
                </button>
                <button onclick="openAddScheduleModal()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition font-medium flex items-center gap-2">
                    <span>+</span> Th√™m l·ªãch l√†m
                </button>
                <button onclick="sendScheduleByEmail()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition font-medium flex items-center gap-2">
                <span>üìß</span> G·ª≠i l·ªãch l√†m
            </button>
            </div>
        </div>
    </div>

    <!-- Ch√∫ th√≠ch -->
    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg shadow-md mb-4 border border-blue-100">
        <div class="grid grid-cols-2 md:grid-cols-5 gap-3 text-sm">
            <div class="flex items-center gap-2">
                <span class="w-5 h-5 bg-green-100 border-2 border-green-400 rounded-full"></span>
                <span><strong>ƒê·ªß NV: </strong> ‚â•3 ng∆∞·ªùi</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-5 h-5 bg-red-100 border-2 border-red-400 rounded-full"></span>
                <span><strong>Thi·∫øu NV: </strong> &lt;3 ng∆∞·ªùi</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-5 h-5 bg-orange-100 border-2 border-orange-400 rounded-full"></span>
                <span><strong>ƒê·∫ßy ca:</strong> 9/9</span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-5 h-5 bg-yellow-100 border-2 border-yellow-400 rounded-full"></span>
                <span><strong>Ch·ªù duy·ªát</strong></span>
            </div>
            <div class="flex items-center gap-2">
                <span class="w-5 h-5 bg-gray-100 border-2 border-gray-400 rounded-full"></span>
                <span><strong>Tr·ªëng</strong></span>
            </div>
        </div>
    </div>

    <!-- B·∫£ng l·ªãch l√†m - L·ªãch xem tu·∫ßn -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden mb-6">
        <div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-3">
            <h3 class="font-semibold text-lg">üìä L·ªãch l√†m vi·ªác theo tu·∫ßn</h3>
        </div>
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-100 border-b-2 border-gray-300">
                    <tr>
                        <th class="px-4 py-3 text-left font-semibold text-gray-700 min-w-[140px]">Ca l√†m</th>
                        <th class="px-4 py-3 text-center font-semibold text-gray-700 min-w-[110px]">Th·ª© 2</th>
                        <th class="px-4 py-3 text-center font-semibold text-gray-700 min-w-[110px]">Th·ª© 3</th>
                        <th class="px-4 py-3 text-center font-semibold text-gray-700 min-w-[110px]">Th·ª© 4</th>
                        <th class="px-4 py-3 text-center font-semibold text-gray-700 min-w-[110px]">Th·ª© 5</th>
                        <th class="px-4 py-3 text-center font-semibold text-gray-700 min-w-[110px]">Th·ª© 6</th>
                        <th class="px-4 py-3 text-center font-semibold text-gray-700 min-w-[110px]">Th·ª© 7</th>
                        <th class="px-4 py-3 text-center font-semibold text-gray-700 min-w-[110px]">Ch·ªß nh·∫≠t</th>
                    </tr>
                    <tr id="dateHeaderRow" class="bg-gray-50 border-b border-gray-200">
                        <th class="px-4 py-2 text-left font-medium text-gray-600"></th>
                        <th class="px-4 py-2 text-center text-xs text-gray-500">--/--</th>
                        <th class="px-4 py-2 text-center text-xs text-gray-500">--/--</th>
                        <th class="px-4 py-2 text-center text-xs text-gray-500">--/--</th>
                        <th class="px-4 py-2 text-center text-xs text-gray-500">--/--</th>
                        <th class="px-4 py-2 text-center text-xs text-gray-500">--/--</th>
                        <th class="px-4 py-2 text-center text-xs text-gray-500">--/--</th>
                        <th class="px-4 py-2 text-center text-xs text-gray-500">--/--</th>
                    </tr>
                </thead>
                <tbody id="scheduleTableBody">
                    <tr>
                        <td colspan="8" class="text-center py-12 text-gray-400">
                            <div class="flex flex-col items-center gap-3">
                                <span class="text-6xl opacity-50">üìÖ</span>
                                <span class="font-medium">Ch·ªçn tu·∫ßn ƒë·ªÉ xem l·ªãch l√†m vi·ªác</span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Danh s√°ch ch·ªù duy·ªát -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
        <div class="bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-4 py-3 flex justify-between items-center">
            <h3 class="font-semibold text-lg">üìã Danh s√°ch ch·ªù duy·ªát (<span id="pendingCount">0</span>)</h3>
            <div class="flex gap-2 flex-wrap">
                <button onclick="approveSelectedSchedules()" class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-lg text-sm font-medium transition flex items-center gap-1">
                    <span>‚úì</span> Duy·ªát ƒë√£ ch·ªçn
                </button>
                <button onclick="rejectSelectedSchedules()" class="bg-red-600 hover: bg-red-700 text-white px-3 py-1 rounded-lg text-sm font-medium transition flex items-center gap-1">
                    <span>‚úï</span> T·ª´ ch·ªëi ƒë√£ ch·ªçn
                </button>
            </div>
        </div>
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gray-50 border-b border-gray-200 sticky top-0">
                    <tr>
                        <th class="px-4 py-3 text-left w-10">
                            <input type="checkbox" id="selectAllPending" onchange="toggleAllPendingCheckboxes()" class="w-4 h-4 cursor-pointer rounded">
                        </th>
                        <th class="px-4 py-3 text-left font-semibold text-gray-700 min-w-[150px]">Nh√¢n vi√™n</th>
                        <th class="px-4 py-3 text-left font-semibold text-gray-700 min-w-[120px]">SƒêT</th>
                        <th class="px-4 py-3 text-left font-semibold text-gray-700 min-w-[150px]">Email</th>
                        <th class="px-4 py-3 text-left font-semibold text-gray-700 min-w-[120px]">Ng√†y l√†m</th>
                        <th class="px-4 py-3 text-left font-semibold text-gray-700 min-w-[120px]">Ca l√†m</th>
                        <th class="px-4 py-3 text-left font-semibold text-gray-700 min-w-[150px]">Gi·ªù l√†m</th>
                        <th class="px-4 py-3 text-center font-semibold text-gray-700 min-w-[180px]">Thao t√°c</th>
                    </tr>
                </thead>
                <tbody id="pendingScheduleList" class="divide-y divide-gray-200">
                    <tr>
                        <td colspan="8" class="text-center py-6 text-gray-400">
                            <div class="flex flex-col items-center gap-2">
                                <span class="text-3xl opacity-50">‚úì</span>
                                <span>Kh√¥ng c√≥ l·ªãch ch·ªù duy·ªát</span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Tab Th∆∞·ªüng Ph·∫°t Content -->
<div id="tab-thuong-phat" class="tab-content hidden p-6">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <div>
            <h2 class="text-2xl font-bold text-gray-800">üéÅ Qu·∫£n l√Ω Th∆∞·ªüng Ph·∫°t</h2>
            <p class="text-gray-500 text-sm mt-1">Qu·∫£n l√Ω chi ti·∫øt th∆∞·ªüng ph·∫°t cho nh√¢n vi√™n</p>
        </div>
        <button onclick="openAddThuongPhatModal()"
            class="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-5 py-2.5 rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            Th√™m th∆∞·ªüng/ph·∫°t
        </button>
    </div>

    <!-- Th·ªëng k√™ -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <!-- T·ªïng ti·ªÅn th∆∞·ªüng -->
        <div class="bg-gradient-to-br from-green-500 to-green-600 text-white p-5 rounded-xl shadow-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-green-100 text-sm font-medium">T·ªïng ti·ªÅn th∆∞·ªüng</p>
                    <p id="statTotalThuong" class="text-2xl font-bold mt-1">+0ƒë</p>
                </div>
                <div class="bg-white/20 p-3 rounded-lg">
                    <span class="text-2xl">üéÅ</span>
                </div>
            </div>
        </div>

        <!-- T·ªïng ti·ªÅn ph·∫°t -->
        <div class="bg-gradient-to-br from-red-500 to-red-600 text-white p-5 rounded-xl shadow-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-red-100 text-sm font-medium">T·ªïng ti·ªÅn ph·∫°t</p>
                    <p id="statTotalPhat" class="text-2xl font-bold mt-1">-0ƒë</p>
                </div>
                <div class="bg-white/20 p-3 rounded-lg">
                    <span class="text-2xl">‚ö†Ô∏è</span>
                </div>
            </div>
        </div>

        <!-- S·ªë l·∫ßn th∆∞·ªüng -->
        <div class="bg-gradient-to-br from-blue-500 to-blue-600 text-white p-5 rounded-xl shadow-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-blue-100 text-sm font-medium">S·ªë l·∫ßn th∆∞·ªüng</p>
                    <p id="statCountThuong" class="text-2xl font-bold mt-1">0</p>
                </div>
                <div class="bg-white/20 p-3 rounded-lg">
                    <span class="text-2xl">üìà</span>
                </div>
            </div>
        </div>

        <!-- S·ªë l·∫ßn ph·∫°t -->
        <div class="bg-gradient-to-br from-orange-500 to-orange-600 text-white p-5 rounded-xl shadow-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-orange-100 text-sm font-medium">S·ªë l·∫ßn ph·∫°t</p>
                    <p id="statCountPhat" class="text-2xl font-bold mt-1">0</p>
                </div>
                <div class="bg-white/20 p-3 rounded-lg">
                    <span class="text-2xl">üìâ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- B·ªô l·ªçc -->
    <div class="bg-white p-4 rounded-xl shadow-md mb-6 border border-gray-100">
        <div class="flex flex-wrap gap-4 items-end">
            <div class="flex-1 min-w-[150px]">
                <label class="block text-sm font-medium text-gray-700 mb-1.5">Lo·∫°i</label>
                <select id="filterThuongPhatLoai" 
                    class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors">
                    <option value="">T·∫•t c·∫£</option>
                    <option value="Thuong">üéÅ Th∆∞·ªüng</option>
                    <option value="Phat">‚ö†Ô∏è Ph·∫°t</option>
                </select>
            </div>
            <div class="flex-1 min-w-[200px]">
                <label class="block text-sm font-medium text-gray-700 mb-1.5">B·∫£ng l∆∞∆°ng</label>
                <select id="filterThuongPhatLuong" 
                    class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-colors">
                    <option value="">-- T·∫•t c·∫£ --</option>
                </select>
            </div>
            <div class="flex gap-2">
                <button onclick="filterThuongPhat()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2.5 rounded-lg transition-colors flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    L·ªçc
                </button>
                <button onclick="resetThuongPhatFilter()"
                    class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2.5 rounded-lg transition-colors flex items-center gap-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    Reset
                </button>
            </div>
        </div>
    </div>

    <!-- B·∫£ng th∆∞·ªüng ph·∫°t -->
    <div class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-100">
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                    <tr>
                        <th class="px-4 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">#</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">B·∫£ng l∆∞∆°ng</th>
                        <th class="px-4 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">Lo·∫°i</th>
                        <th class="px-4 py-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider">S·ªë ti·ªÅn</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">L√Ω do</th>
                        <th class="px-4 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">Ng√†y √°p d·ª•ng</th>
                        <th class="px-4 py-4 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider">Thao t√°c</th>
                    </tr>
                </thead>
                <tbody id="thuongPhatTable" class="divide-y divide-gray-200">
                    <tr>
                        <td colspan="7" class="text-center py-12 text-gray-500">
                            <div class="flex flex-col items-center gap-3">
                                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div>
                                <span>ƒêang t·∫£i d·ªØ li·ªáu...</span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

    <!-- Tab: Qu·∫£n l√Ω l∆∞∆°ng -->
<div id="tab-luong" class="tab-content hidden p-6">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <div>
            <h2 class="text-2xl font-bold text-gray-800">üí∞ Qu·∫£n l√Ω L∆∞∆°ng</h2>
            <p class="text-gray-500 text-sm mt-1">Qu·∫£n l√Ω b·∫£ng l∆∞∆°ng nh√¢n vi√™n theo th√°ng</p>
        </div>
        <button onclick="guiBangLuongToanBo()"
            class="bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white px-5 py-2.5 rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg flex items-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            G·ª≠i b·∫£ng l∆∞∆°ng
        </button>
    </div>

    <!-- Th·ªëng k√™ -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
        <div class="bg-gradient-to-br from-orange-500 to-orange-600 text-white p-5 rounded-xl shadow-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-orange-100 text-sm font-medium">T·ªïng chi l∆∞∆°ng</p>
                    <p id="statTotalLuong" class="text-2xl font-bold mt-1">0ƒë</p>
                </div>
                <div class="bg-white/20 p-3 rounded-lg">
                    <span class="text-2xl">üíµ</span>
                </div>
            </div>
        </div>
        <div class="bg-gradient-to-br from-green-500 to-green-600 text-white p-5 rounded-xl shadow-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-green-100 text-sm font-medium">T·ªïng th∆∞·ªüng</p>
                    <p id="statTotalThuongLuong" class="text-2xl font-bold mt-1">+0ƒë</p>
                </div>
                <div class="bg-white/20 p-3 rounded-lg">
                    <span class="text-2xl">üéÅ</span>
                </div>
            </div>
        </div>
        <div class="bg-gradient-to-br from-red-500 to-red-600 text-white p-5 rounded-xl shadow-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-red-100 text-sm font-medium">T·ªïng ph·∫°t</p>
                    <p id="statTotalPhatLuong" class="text-2xl font-bold mt-1">-0ƒë</p>
                </div>
                <div class="bg-white/20 p-3 rounded-lg">
                    <span class="text-2xl">‚ö†Ô∏è</span>
                </div>
            </div>
        </div>
        <div class="bg-gradient-to-br from-purple-500 to-purple-600 text-white p-5 rounded-xl shadow-lg">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-purple-100 text-sm font-medium">T·ªïng ca l√†m</p>
                    <p id="statTotalCaLam" class="text-2xl font-bold mt-1">0 ca</p>
                </div>
                <div class="bg-white/20 p-3 rounded-lg">
                    <span class="text-2xl">üìÖ</span>
                </div>
            </div>
        </div>
    </div>

    <!-- B·ªô l·ªçc -->
    <div class="bg-white p-4 rounded-xl shadow-md mb-6 border border-gray-100">
        <div class="flex flex-wrap gap-4 items-end">
            <div class="flex-1 min-w-[120px]">
                <label class="block text-sm font-medium text-gray-700 mb-1.5">Th√°ng</label>
                <select id="filterLuongThang"
                    class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-gray-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500">
                    <option value="">T·∫•t c·∫£</option>
                    <option value="1">Th√°ng 1</option>
                    <option value="2">Th√°ng 2</option>
                    <option value="3">Th√°ng 3</option>
                    <option value="4">Th√°ng 4</option>
                    <option value="5">Th√°ng 5</option>
                    <option value="6">Th√°ng 6</option>
                    <option value="7">Th√°ng 7</option>
                    <option value="8">Th√°ng 8</option>
                    <option value="9">Th√°ng 9</option>
                    <option value="10">Th√°ng 10</option>
                    <option value="11">Th√°ng 11</option>
                    <option value="12">Th√°ng 12</option>
                </select>
            </div>
            <div class="flex-1 min-w-[100px]">
                <label class="block text-sm font-medium text-gray-700 mb-1.5">NƒÉm</label>
                <select id="filterLuongNam"
                    class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-gray-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500">
                    <option value="">T·∫•t c·∫£</option>
                    <option value="2024">2024</option>
                    <option value="2025">2025</option>
                    <option value="2026">2026</option>
                </select>
            </div>
            <div class="flex-1 min-w-[180px]">
                <label class="block text-sm font-medium text-gray-700 mb-1.5">Nh√¢n vi√™n</label>
                <select id="filterLuongNhanVien"
                    class="w-full border border-gray-300 rounded-lg px-3 py-2.5 text-gray-700 focus:ring-2 focus:ring-orange-500 focus:border-orange-500">
                    <option value="">-- T·∫•t c·∫£ --</option>
                </select>
            </div>
            <div class="flex gap-2">
                <button onclick="filterLuong()"
                    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2.5 rounded-lg transition-colors flex items-center gap-2">
                    üîç L·ªçc
                </button>
                <button onclick="resetLuongFilter()"
                    class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2.5 rounded-lg transition-colors flex items-center gap-2">
                    ‚Ü∫ Reset
                </button>
            </div>
        </div>
    </div>

    <!-- B·∫£ng l∆∞∆°ng -->
    <div class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-100">
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
                    <tr>
                        <th class="px-3 py-4 text-center text-xs font-semibold text-gray-600 uppercase">#</th>
                        <th class="px-3 py-4 text-left text-xs font-semibold text-gray-600 uppercase">Nh√¢n vi√™n</th>
                        <th class="px-3 py-4 text-center text-xs font-semibold text-gray-600 uppercase">K·ª≥ l∆∞∆°ng</th>
                        <th class="px-3 py-4 text-right text-xs font-semibold text-gray-600 uppercase">L∆∞∆°ng CB</th>
                        <th class="px-3 py-4 text-center text-xs font-semibold text-gray-600 uppercase">S·ªë ca</th>
                        <th class="px-3 py-4 text-right text-xs font-semibold text-gray-600 uppercase">Th∆∞·ªüng</th>
                        <th class="px-3 py-4 text-right text-xs font-semibold text-gray-600 uppercase">Ph·∫°t</th>
                        <th class="px-3 py-4 text-right text-xs font-semibold text-gray-600 uppercase">T·ªïng l∆∞∆°ng</th>
                        <th class="px-3 py-4 text-center text-xs font-semibold text-gray-600 uppercase">Ng√†y t√≠nh</th>
                        <th class="px-3 py-4 text-center text-xs font-semibold text-gray-600 uppercase">Thao t√°c</th>
                    </tr>
                </thead>
                <tbody id="luongTable" class="divide-y divide-gray-200">
                    <tr>
                        <td colspan="11" class="text-center py-12 text-gray-500">
                            <div class="flex flex-col items-center gap-3">
                                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"></div>
                                <span>ƒêang t·∫£i d·ªØ li·ªáu...</span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

    <!-- Tab: Qu·∫£n l√Ω doanh thu -->
    <div id="tab-doanh-thu" class="tab-content hidden">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω doanh thu</h2>
  </div>

  <!-- B·ªô l·ªçc -->
  <div class="bg-white rounded-lg shadow-md p-4 mb-6">
    <div class="flex gap-4 items-center flex-wrap">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">L·ªçc theo:</label>
        <select id="filter-type" class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus: ring-blue-500">
          <option value="day">H√¥m nay</option>
          <option value="week">Tu·∫ßn n√†y</option>
          <option value="month" selected>Th√°ng n√†y</option>
          <option value="year">NƒÉm n√†y</option>
          <option value="custom">T√πy ch·ªçn</option>
        </select>
      </div>
      <div>
  <label class="block text-sm font-medium text-gray-700 mb-2">Ca l√†m vi·ªác:</label>
  <select id="filter-shift" class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
    <option value="all">T·∫•t c·∫£ ca</option>
    <option value="morning">Ca s√°ng (8:00 - 14:00)</option>
    <option value="evening">Ca t·ªëi (14:00 - 20:00)</option>
  </select>
</div>

      <!-- Date picker cho custom -->
      <div id="custom-date-range" class="hidden flex gap-2">
        <input type="date" id="start-date" class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus: ring-blue-500">
        <span class="text-gray-500">ƒë·∫øn</span>
        <input type="date" id="end-date" class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>

      <button id="btn-filter" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded transition">
        L·ªçc
      </button>
    </div>
  </div>

  <!-- Th·ªëng k√™ t·ªïng qu√°t -->
  <div class="grid grid-cols-1 md: grid-cols-4 gap-4 mb-6">
    <div class="bg-white rounded-lg shadow-md p-4">
      <p class="text-gray-600 text-sm">T·ªïng doanh thu</p>
      <p class="text-2xl font-bold text-green-600" id="total-revenue">0 ƒë</p>
    </div>
    <div class="bg-white rounded-lg shadow-md p-4">
      <p class="text-gray-600 text-sm">S·ªë ƒë∆°n h√†ng</p>
      <p class="text-2xl font-bold text-blue-600" id="total-orders">0</p>
    </div>
    <div class="bg-white rounded-lg shadow-md p-4">
      <p class="text-gray-600 text-sm">Doanh thu trung b√¨nh/ƒë∆°n</p>
      <p class="text-2xl font-bold text-purple-600" id="avg-revenue">0 ƒë</p>
    </div>
    <div class="bg-white rounded-lg shadow-md p-4">
      <p class="text-gray-600 text-sm">ƒê∆°n h√†ng ƒë√£ thanh to√°n</p>
      <p class="text-2xl font-bold text-orange-600" id="paid-orders">0</p>
    </div>
  </div>

  <!-- Bi·ªÉu ƒë·ªì -->
  <div class="bg-white rounded-lg shadow-md p-4 mb-6">
    <h3 class="text-lg font-semibold text-gray-700 mb-4">Bi·ªÉu ƒë·ªì doanh thu</h3>
    <div style="position: relative; height: 400px;">
      <canvas id="revenue-chart"></canvas>
    </div>
  </div>

  <!-- B·∫£ng chi ti·∫øt -->
  <div class="bg-white rounded-lg shadow-md p-4">
    <h3 class="text-lg font-semibold text-gray-700 mb-4">Chi ti·∫øt doanh thu theo ng√†y</h3>
    <div class="overflow-x-auto">
      <table class="w-full text-sm text-left text-gray-600">
        <thead class="text-xs uppercase bg-gray-100 text-gray-700">
          <tr>
            <th class="px-4 py-2">Ng√†y</th>
            <th class="px-4 py-2">S·ªë ƒë∆°n h√†ng</th>
            <th class="px-4 py-2">Doanh thu</th>
            <th class="px-4 py-2">Tr·∫°ng th√°i thanh to√°n</th>
          </tr>
        </thead>
        <tbody id="revenue-table-body">
          <tr>
            <td colspan="4" class="px-4 py-2 text-center text-gray-500">ƒêang t·∫£i d·ªØ li·ªáu...</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
  </section>

  <!-- Parent: Qu·∫£n l√Ω th√†nh vi√™n -->
  <section id="parent-thanh-vien" class="parent-section hidden">
    <!-- Tab: Qu·∫£n l√Ω th√†nh vi√™n -->
    <div id="tab-thanh-vien" class="tab-content hidden">
  <!-- Header -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
    <div>
      <h2 class="text-2xl font-bold text-gray-800">üë• Qu·∫£n l√Ω th√†nh vi√™n</h2>
      <p class="text-gray-500 text-sm mt-1">H·ªá th·ªëng ph√¢n b·∫≠c: ƒê·ªìng ‚Üí B·∫°c ‚Üí V√†ng ‚Üí Kim C∆∞∆°ng</p>
    </div>
    <div class="flex gap-3">
      <select id="filterMemberTier" onchange="filterMembersByTier(this.value)" 
              class="px-4 py-2 border rounded-lg focus:ring-2 focus:ring-orange-300">
        <option value="all">T·∫•t c·∫£ b·∫≠c</option>
        <option value="ƒê·ªìng">ü•â ƒê·ªìng</option>
        <option value="B·∫°c">ü•à B·∫°c</option>
        <option value="V√†ng">ü•á V√†ng</option>
        <option value="Kim C∆∞∆°ng">üíé Kim C∆∞∆°ng</option>
      </select>
      <button id="btnAddMember" class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium transition-colors">
        + Th√™m th√†nh vi√™n
      </button>
    </div>
  </div>

  <!-- Th·ªëng k√™ b·∫≠c th√†nh vi√™n -->
  <div id="memberTierStats" class="mb-6">
    <!-- S·∫Ω ƒë∆∞·ª£c render b·ªüi JavaScript -->
  </div>

  <!-- B·∫£ng quy ƒë·ªïi ƒëi·ªÉm -->
  <div class="bg-gradient-to-r from-orange-50 to-amber-50 p-4 rounded-xl mb-6 border border-orange-200">
    <h3 class="font-semibold text-gray-800 mb-3">üìä B·∫£ng quy ƒë·ªïi ƒëi·ªÉm & ∆∞u ƒë√£i</h3>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
      <div class="bg-white p-3 rounded-lg border border-amber-300">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-2xl">ü•â</span>
          <span class="font-bold text-amber-600">ƒê·ªìng</span>
        </div>
        <p class="text-sm text-gray-600">0 - 119 ƒëi·ªÉm</p>
        <p class="text-green-600 font-semibold">Gi·∫£m 5%</p>
      </div>
      <div class="bg-white p-3 rounded-lg border border-gray-300">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-2xl">ü•à</span>
          <span class="font-bold text-gray-500">B·∫°c</span>
        </div>
        <p class="text-sm text-gray-600">120 - 239 ƒëi·ªÉm</p>
        <p class="text-green-600 font-semibold">Gi·∫£m 10%</p>
      </div>
      <div class="bg-white p-3 rounded-lg border border-yellow-300">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-2xl">ü•á</span>
          <span class="font-bold text-yellow-500">V√†ng</span>
        </div>
        <p class="text-sm text-gray-600">240 - 499 ƒëi·ªÉm</p>
        <p class="text-green-600 font-semibold">Gi·∫£m 15%</p>
      </div>
      <div class="bg-white p-3 rounded-lg border border-blue-300">
        <div class="flex items-center gap-2 mb-2">
          <span class="text-2xl">üíé</span>
          <span class="font-bold text-blue-500">Kim C∆∞∆°ng</span>
        </div>
        <p class="text-sm text-gray-600">500+ ƒëi·ªÉm</p>
        <p class="text-green-600 font-semibold">Gi·∫£m 20%</p>
      </div>
    </div>
    <p class="text-xs text-gray-500 mt-3">üí° Quy ƒë·ªïi: 1.000ƒë = 1 ƒëi·ªÉm t√≠ch l≈©y</p>
  </div>

  <!-- B·∫£ng th√†nh vi√™n -->
  <div class="bg-white rounded-xl shadow-sm overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">#</th>
            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">H·ªç t√™n</th>
            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">SƒêT</th>
            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">Email</th>
            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">ƒêi·ªÉm</th>
            <th class="px-4 py-3 text-left text-sm font-semibold text-gray-600">B·∫≠c & Ti·∫øn tr√¨nh</th>
            <th class="px-4 py-3 text-right text-sm font-semibold text-gray-600">T·ªïng chi ti√™u</th>
            <th class="px-4 py-3 text-center text-sm font-semibold text-gray-600">Thao t√°c</th>
          </tr>
        </thead>
        <tbody id="memberTable">
          <!-- Data will be loaded by JavaScript -->
        </tbody>
      </table>
    </div>
  </div>
</div>
    <!-- Tab: B·∫≠c th√†nh vi√™n -->
    <div id="tab-bac-thanh-vien" class="tab-content hidden">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">B·∫≠c th√†nh vi√™n</h2>
        <button id="btnAddTier" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg shadow-md">
          + Th√™m b·∫≠c th√†nh vi√™n
        </button>
      </div>

      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">T√™n b·∫≠c</th>
              <th class="px-4 py-3 border-b">ƒêi·ªÉm t·ªëi thi·ªÉu</th>
              <th class="px-4 py-3 border-b">Ph·∫ßn trƒÉm gi·∫£m</th>
              <th class="px-4 py-3 border-b text-center">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="tierTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>

    <!-- Tab: Qu·∫£n l√Ω khuy·∫øn m√£i -->
    <div id="tab-khuyen-mai" class="tab-content hidden">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω khuy·∫øn m√£i</h2>
        <button id="btnAddDiscount" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg shadow-md">
          + Th√™m khuy·∫øn m√£i
        </button>
      </div>
      <div class="overflow-x-auto overflow-y-auto max-h-[500px] bg-white rounded-lg shadow-md">
        <table class="min-w-full text-left border border-gray-200">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 border-b">STT</th>
              <th class="px-4 py-3 border-b">M√£ KM</th>
              <th class="px-4 py-3 border-b">Ph·∫ßn trƒÉm gi·∫£m</th>
              <th class="px-4 py-3 border-b">M√¥ t·∫£</th>
              <th class="px-4 py-3 border-b">Th√†nh vi√™n</th>
              <th class="px-4 py-3 border-b">Ng√†y h·∫øt h·∫°n</th>
              <th class="px-4 py-3 border-b text-center">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="discountTable" class="divide-y"></tbody>
        </table>
      </div>
    </div>
  </section>

<!-- Parent: Qu·∫£n l√Ω ƒë∆°n h√†ng -->
<section id="orders-alone" class="mt-6 hidden">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-semibold text-gray-700">Qu·∫£n l√Ω ƒë∆°n h√†ng</h2>
    </div>

    <div class="bg-white p-4 rounded-lg shadow-md mb-4 flex flex-wrap gap-4 items-end">
      <div>
        <label class="block text-sm font-medium text-gray-700">Ng√†y t·ª´</label>
        <input type="date" id="filterStartDate" class="mt-1 p-2 border rounded-lg border-gray-300">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Ng√†y ƒë·∫øn</label>
        <input type="date" id="filterEndDate" class="mt-1 p-2 border rounded-lg border-gray-300">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Nh√¢n vi√™n t·∫°o ƒë∆°n</label>
        <input type="text" id="filterStaff" placeholder="T√™n nh√¢n vi√™n" class="mt-1 p-2 border rounded-lg border-gray-300">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Kh√°ch h√†ng</label>
        <select id="filterCustomer" class="mt-1 p-2 border rounded-lg border-gray-300">
          <option value="">-- T·∫•t c·∫£ --</option>
          <option value="khach_vang_lai">Kh√°ch v√£ng lai</option>
          <option value="thanh_vien">Th√†nh vi√™n</option>
        </select>
      </div>
      <div>
        <button id="btnFilterOrders" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">L·ªçc</button>
        <button id="btnResetFilter" class="bg-gray-300 text-black px-4 py-2 rounded-lg hover:bg-gray-400">Reset</button>
      </div>
    </div>

    <div class="overflow-x-auto overflow-y-scroll max-h-[500px] bg-white rounded-lg shadow-md">
      <table class="min-w-full text-left border border-gray-200">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-4 py-3 border-b">STT</th>
            <th class="px-4 py-3 border-b">Ng√†y ƒë·∫∑t</th>
            <th class="px-4 py-3 border-b">T·ªïng ti·ªÅn</th>
            <th class="px-4 py-3 border-b">Ti·ªÅn sau gi·∫£m</th>
            <th class="px-4 py-3 border-b">Tr·∫°ng th√°i</th>
            <th class="px-4 py-3 border-b">T√™n b√†n</th>
            <th class="px-4 py-3 border-b">Kh√°ch h√†ng</th>
            <th class="px-4 py-3 border-b">Nh√¢n vi√™n t·∫°o ƒë∆°n</th>
            <th class="px-4 py-3 border-b">Thao t√°c</th>
          </tr>
        </thead>
        <tbody id="orderTable" class="divide-y"></tbody>
      </table>
    </div>
  </section>
</main>

<!-- Modal T√†i kho·∫£n nh√¢n vi√™n -->
<div id="employeeModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-[1000]">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h3 id="modalTitle" class="text-lg font-semibold mb-4">Th√™m t√†i kho·∫£n</h3>

    <form id="employeeForm" class="space-y-4">
      <input type="hidden" id="empId" name="id">

      <div>
        <label class="block text-sm font-medium text-gray-700">T√™n ƒëƒÉng nh·∫≠p</label>
        <input type="text" id="usernameInput"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="Nh·∫≠p t√™n ƒëƒÉng nh·∫≠p" required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">M·∫≠t kh·∫©u</label>
        <input type="password" id="passwordInput"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="Nh·∫≠p m·∫≠t kh·∫©u" required>
        <p class="text-xs text-gray-500 mt-1">Khi s·ª≠a: n·∫øu kh√¥ng ƒë·ªïi m·∫≠t kh·∫©u th√¨ ƒë·ªÉ tr·ªëng.</p>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">T√™n nh√¢n vi√™n</label>
        <input type="text" id="nameInput"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="VD: Nguy·ªÖn VƒÉn A" required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">S·ªë ƒëi·ªán tho·∫°i</label>
        <!-- API dangKy nh·∫≠n so_dien_thoai -->
        <input type="text" id="phoneInput"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="VD: 0901234567" required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Email</label>
        <input type="email" id="emailInput"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="VD: example@gmail.com">
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">L∆∞∆°ng c∆° b·∫£n</label>
        <input type="number" id="baseSalaryInput" min="0" step="1000"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="VD: 200000" value="200000" required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Vai tr√≤</label>
        <select id="roleSelect"
                class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500" required>
          <option value="">-- Ch·ªçn vai tr√≤ --</option>
          <option value="2">Thu ng√¢n</option>
          <option value="3">Ph·ª•c v·ª•</option>
          <option value="4">Pha ch·∫ø</option>
        </select>
      </div>

      <div class="flex justify-end space-x-2">
        <button type="button" id="btnCancel"
                class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
        <button type="submit"
                class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">L∆∞u</button>
      </div>
    </form>
  </div>
</div>

  <!-- Modal S·ª≠a t√†i kho·∫£n -->
<div id="modalSuaTaiKhoan" class="fixed inset-0 bg-black/40 hidden items-center justify-center z-50">
  <div class="bg-white w-full max-w-lg rounded-xl shadow-lg p-6">
    <div class="flex items-center justify-between mb-4">
      <h2 class="text-lg font-semibold">S·ª≠a t√†i kho·∫£n</h2>
      <button onclick="dongModalSuaTaiKhoan()" class="text-gray-500 hover:text-gray-800 text-xl">&times;</button>
    </div>

    <form id="formSuaTaiKhoan" class="space-y-4">
      <input type="hidden" id="edit_tai_khoan_id" />

      <div>
        <label class="block text-sm font-medium mb-1">T√™n ƒëƒÉng nh·∫≠p</label>
        <input id="edit_ten_dang_nhap" class="w-full border rounded-lg px-3 py-2" placeholder="VD: ngoc123" />
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">M·∫≠t kh·∫©u (ƒë·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi)</label>
        <input id="edit_mat_khau" type="password" class="w-full border rounded-lg px-3 py-2" placeholder="VD: 123456" />
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Vai tr√≤ ID</label>
        <input id="edit_vai_tro_id" class="w-full border rounded-lg px-3 py-2" placeholder="VD: 4" />
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">L∆∞∆°ng</label>
        <input id="edit_luong" type="number" min="0" step="1000" class="w-full border rounded-lg px-3 py-2" placeholder="VD: 8500000" />
      </div>

      <div class="flex justify-end gap-2 pt-2">
        <button type="button" onclick="dongModalSuaTaiKhoan()"
          class="px-4 py-2 rounded-lg border hover:bg-gray-50">
          H·ªßy
        </button>
        <button type="submit"
          class="px-4 py-2 rounded-lg bg-green-500 hover:bg-green-600 text-white">
          L∆∞u
        </button>
      </div>
    </form>
  </div>
</div>


    <!-- Modal B·∫≠c th√†nh vi√™n -->
    <div id="tierModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
      <div class="bg-white rounded-lg shadow-lg w-96 p-6">
        <h3 id="tierModalTitle" class="text-lg font-semibold mb-4">Th√™m b·∫≠c th√†nh vi√™n</h3>
        <form id="tierForm" class="space-y-4">
          <input type="hidden" id="tierId" name="id">

          <div>
            <label class="block text-sm font-medium text-gray-700">T√™n b·∫≠c</label>
            <input type="text" id="tierName" name="ten_bac"
                   class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
                   placeholder="VD: V√†ng" required>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">ƒêi·ªÉm t·ªëi thi·ªÉu</label>
            <input type="number" id="tierMinPoints" name="diem_toi_thieu"
                   class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
                   placeholder="VD: 240" required>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Ph·∫ßn trƒÉm gi·∫£m (%)</label>
            <input type="number" id="tierDiscount" name="phan_tram_giam" step="0.1"
                   class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
                   placeholder="VD: 15" required>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">M√£ icon (t√πy ch·ªçn)</label>
            <input type="text" id="tierIcon" name="ma_icon"
                   class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
                   placeholder="VD: ü•á">
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">M√£ m√†u (t√πy ch·ªçn)</label>
            <input type="text" id="tierColor" name="ma_mau"
                   class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
                   placeholder="VD: bg-yellow-500">
          </div>

          <div class="flex justify-end space-x-2">
            <button type="button" id="btnCancelTier"
                    class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
            <button type="submit"
                    class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">L∆∞u</button>
          </div>
        </form>
      </div>
    </div>
   </div>

   <!-- Modal th√™m s·∫£n ph·∫©m -->
<div id="productModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h3 id="productModalTitle" class="text-lg font-semibold mb-4">Th√™m s·∫£n ph·∫©m</h3>
    <form id="productForm" class="space-y-4" enctype="multipart/form-data">
      <input type="hidden" id="productId" name="id">

      <div>
        <label class="block text-sm font-medium text-gray-700">T√™n s·∫£n ph·∫©m</label>
        <input type="text" id="productName" name="ten_san_pham" 
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="VD: C√† ph√™ s·ªØa" required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">M√¥ t·∫£</label>
        <textarea id="productDesc" name="mo_ta"
                  class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
                  placeholder="M√¥ t·∫£ s·∫£n ph·∫©m"></textarea>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Lo·∫°i s·∫£n ph·∫©m</label>
        <select id="productCategory" name="loai_id" 
                class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500" required>
          <option value="">-- Ch·ªçn lo·∫°i --</option>
          <option value="1">ƒê·ªì u·ªëng</option>
          <option value="2">ƒê·ªì ƒÉn v·∫∑t</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Gi√° c∆° b·∫£n</label>
        <input type="number" id="productPrice" name="gia_co_ban"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="VD: 35000" required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">H√¨nh ·∫£nh</label>
        <input type="file" id="productImage" name="hinh_anh"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               accept="image/*">
      </div>

      <div class="flex justify-end space-x-2">
        <button type="button" id="btnCancelProduct" 
                class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
        <button type="submit" 
                class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">L∆∞u</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal th√™m/s·ª≠a lo·∫°i s·∫£n ph·∫©m -->
<div id="productTypeModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h3 id="productTypeModalTitle" class="text-lg font-semibold mb-4">Th√™m lo·∫°i s·∫£n ph·∫©m</h3>
    <form id="productTypeForm" class="space-y-4">
      <input type="hidden" id="productTypeId" name="id">

      <div>
        <label class="block text-sm font-medium text-gray-700">T√™n lo·∫°i s·∫£n ph·∫©m</label>
        <input type="text" id="productTypeName" name="ten_loai" 
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-blue-500 focus:border-blue-500"
               placeholder="VD: ƒê·ªì u·ªëng" required>
      </div>

      <div class="flex justify-end space-x-2">
        <button type="button" id="btnCancelProductType" 
                class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
        <button type="submit" 
                class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">L∆∞u</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Th√™m/S·ª≠a Combo -->
<div id="comboModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto">
    <h3 id="comboModalTitle" class="text-xl font-semibold mb-4">Th√™m combo</h3>
    
    <form id="comboForm" enctype="multipart/form-data">
      <input type="hidden" id="comboId">
      
      <div class="grid grid-cols-2 gap-4 mb-4">
        <div>
          <label class="block text-sm font-medium mb-1">T√™n combo *</label>
          <input type="text" id="comboName" required
                 class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500">
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-1">Gi√° combo *</label>
          <input type="number" id="comboPrice" required min="0"
                 class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500">
        </div>
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium mb-1">M√¥ t·∫£</label>
        <textarea id="comboDesc" rows="3"
                  class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500"></textarea>
      </div>

      <div class="grid grid-cols-2 gap-4 mb-4">
        <div>
          <label class="block text-sm font-medium mb-1">Tr·∫°ng th√°i</label>
          <select id="comboStatus"
                  class="w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500">
            <option value="active">ƒêang b√°n</option>
            <option value="inactive">Ng·ª´ng b√°n</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium mb-1">H√¨nh ·∫£nh</label>
          <input type="file" id="comboImage" accept="image/*"
                 class="w-full px-3 py-2 border rounded-lg">
        </div>
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium mb-2">Ch·ªçn s·∫£n ph·∫©m *</label>
        <div id="comboProductList" class="max-h-60 overflow-y-auto space-y-2 border rounded-lg p-3">
          <!-- Danh s√°ch s·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y -->
        </div>
      </div>

      <div class="flex justify-end gap-3">
        <button type="button" id="btnCancelCombo"
                class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">
          H·ªßy
        </button>
        <button type="submit"
                class="px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700">
          L∆∞u
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Th√™m b√†n -->
<div id="tableModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
  <div class="bg-white rounded-lg shadow-lg w-80 p-6">
    <h3 id="tableModalTitle" class="text-lg font-semibold mb-4">Th√™m b√†n</h3>
    <form id="tableForm" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700">T√™n b√†n</label>
        <input type="text" id="tableName" name="ten_ban"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-yellow-500 focus:border-yellow-500"
               placeholder="VD: B√†n 1" required>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Tr·∫°ng th√°i</label>
        <select id="tableStatus" name="trang_thai"
                class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-yellow-500 focus:border-yellow-500">
          <option value="Tr·ªëng">Tr·ªëng</option>
          <option value="ƒêang ph·ª•c v·ª•">ƒêang ph·ª•c v·ª•</option>
        </select>
      </div>
      <div class="flex justify-end space-x-2">
        <button type="button" id="btnCancelTable" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
        <button type="submit" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700">L∆∞u</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Chi Ti·∫øt ƒë∆°n h√†ng -->
<div id="orderDetailModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50">
  <div class="bg-white rounded-lg shadow-lg w-2/3 max-h-[80vh] overflow-y-auto p-6">
    <h3 class="text-lg font-semibold mb-4">Chi Ti·∫øt ƒê∆°n H√†ng</h3>
    <table class="min-w-full text-left border border-gray-200 mb-4">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-4 py-2 border-b">STT</th>
          <th class="px-4 py-2 border-b">S·∫£n ph·∫©m</th>
          <th class="px-4 py-2 border-b">K√≠ch c·ª°</th>
          <th class="px-4 py-2 border-b">Topping</th>
          <th class="px-4 py-2 border-b">ƒê∆°n gi√°</th>
          <th class="px-4 py-2 border-b">S·ªë l∆∞·ª£ng</th>
        </tr>
      </thead>
      <tbody id="orderDetailTable" class="divide-y"></tbody>
    </table>
    <div class="flex justify-end">
      <button onclick="closeOrderDetailModal()" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">ƒê√≥ng</button>
    </div>
  </div>
</div>

<!-- Modal Th√™m/S·ª≠a Khuy·∫øn m√£i -->
<div id="discountModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h3 id="discountModalTitle" class="text-lg font-semibold mb-4">Th√™m khuy·∫øn m√£i</h3>
    <form id="discountForm" class="space-y-4">
      <input type="hidden" id="discountId" name="id">

      <div>
        <label class="block text-sm font-medium text-gray-700">M√£ khuy·∫øn m√£i</label>
        <input type="text" id="discountCode" name="ma_khuyen_mai"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-purple-500 focus:border-purple-500"
               placeholder="VD: KM01" required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Ph·∫ßn trƒÉm gi·∫£m</label>
        <input type="number" id="discountPercent" name="phan_tram_giam"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-purple-500 focus:border-purple-500"
               placeholder="VD: 10" min="0" max="100" required>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">M√¥ t·∫£</label>
        <textarea id="discountDesc" name="mo_ta"
                  class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-purple-500 focus:border-purple-500"
                  placeholder="M√¥ t·∫£ khuy·∫øn m√£i"></textarea>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">√Åp d·ª•ng cho th√†nh vi√™n</label>
        <select id="discountMember" name="thanh_vien_id"
                class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-purple-500 focus:border-purple-500">
          <option value="">‚Äî T·∫•t c·∫£ ‚Äî</option>
        </select>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-700">Ng√†y h·∫øt h·∫°n</label>
        <input type="date" id="discountExpiry" name="ngay_het_han"
               class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-purple-500 focus:border-purple-500">
      </div>

      <div class="flex justify-end space-x-2">
        <button type="button" id="btnCancelDiscount"
                class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
        <button type="submit"
                class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">L∆∞u</button>
      </div>
    </form>
  </div>
</div>

<!-- Modal Th√™m/S·ª≠a Th√†nh vi√™n -->
<div id="memberModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h3 id="memberModalTitle" class="text-lg font-semibold mb-4">Th√™m th√†nh vi√™n</h3>
    <form id="memberForm" class="space-y-4">
      <input type="hidden" id="memberId" name="id">
      
      <div>
        <label class="block text-sm font-medium text-gray-700">H·ªç t√™n</label>
        <input type="text" id="memberName" name="ho_ten" class="mt-1 w-full border-gray-300 rounded-lg p-2 border" required>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">S·ªë ƒëi·ªán tho·∫°i</label>
        <input type="text" id="memberPhone" name="sdt" class="mt-1 w-full border-gray-300 rounded-lg p-2 border" required>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Email</label>
        <input type="email" id="memberEmail" name="email" class="mt-1 w-full border-gray-300 rounded-lg p-2 border">
      </div>

      <div class="flex justify-end space-x-2">
        <button type="button" id="btnCancelMember" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
        <button type="submit" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">L∆∞u</button>
      </div>
    </form>
  </div>
</div>

<!--Modal Th√™m/S·ª≠a K√≠ch c·ª° -->
  <div id="sizeModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
    <div class="bg-white rounded-lg shadow-lg w-96 p-6">
      <h3 id="sizeModalTitle" class="text-lg font-semibold mb-4">Th√™m k√≠ch c·ª°</h3>
      <form id="sizeForm" class="space-y-4">
        <input type="hidden" id="sizeId">
        <div>
          <label class="block text-sm font-medium text-gray-700">T√™n k√≠ch c·ª°</label>
          <input type="text" id="sizeName" class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-teal-500 focus:border-teal-500" placeholder="VD: S, M, L" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700">Gi√° th√™m (ƒë)</label>
          <input type="number" id="sizePrice" class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-teal-500 focus:border-teal-500" placeholder="VD: 5000" min="0" required>
        </div>
        <div class="flex justify-end space-x-2">
          <button type="button" id="btnCancelSize" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
          <button type="submit" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700">L∆∞u</button>
        </div>
      </form>
    </div>
  </div>

  <!--Modal Th√™m/S·ª≠a Topping -->
<div id="toppingModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center">
  <div class="bg-white rounded-lg shadow-lg w-96 p-6">
    <h3 id="toppingModalTitle" class="text-lg font-semibold mb-4">Th√™m topping</h3>
    <form id="toppingForm" class="space-y-4">
      <input type="hidden" id="toppingId">
      <div>
        <label class="block text-sm font-medium text-gray-700">T√™n topping</label>
        <input type="text" id="toppingName" class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-pink-500 focus:border-pink-500" placeholder="VD: Tr√¢n ch√¢u, th·∫°ch" required>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700">Gi√° th√™m (ƒë)</label>
        <input type="number" id="toppingPrice" class="mt-1 w-full border-gray-300 rounded-lg p-2 border focus:ring-pink-500 focus:border-pink-500" placeholder="VD: 5000" min="0" required>
      </div>
      <div class="flex justify-end space-x-2">
        <button type="button" id="btnCancelTopping" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">H·ªßy</button>
        <button type="submit" class="px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700">L∆∞u</button>
      </div>
    </form>
  </div>
</div>




<!-- MODAL TH√äM L·ªäCH L√ÄM VI·ªÜC -->
<div id="addScheduleModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-4 flex justify-between items-center sticky top-0">
            <h3 class="text-xl font-semibold">‚ûï Th√™m l·ªãch l√†m vi·ªác</h3>
            <button onclick="closeAddScheduleModal()" class="text-2xl font-bold hover:text-gray-200 transition">&times;</button>
        </div>
        
        <form id="addScheduleForm" onsubmit="handleAddSchedule(event)" class="p-6 space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Nh√¢n vi√™n -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nh√¢n vi√™n <span class="text-red-500">*</span></label>
                    <select id="nhanVienSelect" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">-- Ch·ªçn nh√¢n vi√™n --</option>
                    </select>
                </div>

                <!-- Ng√†y l√†m -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ng√†y l√†m <span class="text-red-500">*</span></label>
                    <input type="date" id="ngayLamInput" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus: ring-2 focus:ring-green-500">
                </div>

                <!-- Ca l√†m -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ca l√†m <span class="text-red-500">*</span></label>
                    <select id="caLamSelect" onchange="handleCaLamChange()" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500">
                        <option value="">-- Ch·ªçn ca l√†m --</option>
                    </select>
                </div>

                <!-- Tr·∫°ng th√°i -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tr·∫°ng th√°i</label>
                    <select id="trangThaiSelect" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus: outline-none focus:ring-2 focus:ring-green-500">
                        <option value="ƒêƒÉng k√Ω">ƒêƒÉng k√Ω</option>
                        <option value="ƒê√£ x√°c nh·∫≠n">ƒê√£ x√°c nh·∫≠n</option>
                        <option value="H·ªßy">H·ªßy</option>
                    </select>
                </div>

                <!-- Th·ªùi gian b·∫Øt ƒë·∫ßu -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Gi·ªù b·∫Øt ƒë·∫ßu (t√πy ch·ªânh)</label>
                    <input type="time" id="batDauInput" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus: outline-none focus:ring-2 focus:ring-green-500" placeholder="07:00">
                </div>

                <!-- Th·ªùi gian k·∫øt th√∫c -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Gi·ªù k·∫øt th√∫c (t√πy ch·ªânh)</label>
                    <input type="time" id="ketThucInput" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus: outline-none focus:ring-2 focus:ring-green-500" placeholder="16:00">
                </div>
            </div>

            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 text-sm text-blue-700">
                üí° <strong>Ghi ch√∫:</strong> N·∫øu kh√¥ng nh·∫≠p gi·ªù t√πy ch·ªânh, s·∫Ω l·∫•y gi·ªù t·ª´ ca l√†m ƒë∆∞·ª£c ch·ªçn. 
            </div>

            <div class="flex gap-3 justify-end pt-4 border-t border-gray-200">
                <button type="button" onclick="closeAddScheduleModal()" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition">
                    H·ªßy
                </button>
                <button type="submit" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition">
                    Th√™m l·ªãch l√†m
                </button>
            </div>
        </form>
    </div>
</div>

<!-- MODAL CH·ªàNH S·ª¨A L·ªäCH L√ÄM VI·ªÜC -->
<div id="editScheduleModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-4 flex justify-between items-center sticky top-0">
            <h3 class="text-xl font-semibold">‚úèÔ∏è Ch·ªânh s·ª≠a l·ªãch l√†m vi·ªác</h3>
            <button onclick="closeEditScheduleModal()" class="text-2xl font-bold hover:text-gray-200 transition">&times;</button>
        </div>
        
        <form id="editScheduleForm" onsubmit="handleEditSchedule(event)" class="p-6 space-y-4">
            <input type="hidden" id="editLichId">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Nh√¢n vi√™n (ch·ªâ xem) -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nh√¢n vi√™n</label>
                    <input type="text" id="editNhanVienDisplay" disabled class="w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-50 text-gray-600">
                </div>

                <!-- Ng√†y l√†m -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ng√†y l√†m <span class="text-red-500">*</span></label>
                    <input type="date" id="editNgayLamInput" required class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- Ca l√†m -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ca l√†m</label>
                    <select id="editCaLamSelect" onchange="handleEditCaLamChange()" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus: outline-none focus:ring-2 focus:ring-blue-500">
                    </select>
                </div>

                <!-- Tr·∫°ng th√°i -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tr·∫°ng th√°i</label>
                    <select id="editTrangThaiSelect" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="ƒêƒÉng k√Ω">ƒêƒÉng k√Ω</option>
                        <option value="ƒê√£ x√°c nh·∫≠n">ƒê√£ x√°c nh·∫≠n</option>
                        <option value="H·ªßy">H·ªßy</option>
                    </select>
                </div>

                <!-- Th·ªùi gian b·∫Øt ƒë·∫ßu -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Gi·ªù b·∫Øt ƒë·∫ßu</label>
                    <input type="time" id="editBatDauInput" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus: ring-blue-500">
                </div>

                <!-- Th·ªùi gian k·∫øt th√∫c -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Gi·ªù k·∫øt th√∫c</label>
                    <input type="time" id="editKetThucInput" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>

            <div class="flex gap-3 justify-end pt-4 border-t border-gray-200">
                <button type="button" onclick="closeEditScheduleModal()" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium transition">
                    H·ªßy
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition">
                    L∆∞u thay ƒë·ªïi
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Modal G·ª≠i Email -->

<div id="sendEmailModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md mx-4 animate-in fade-in slide-in-from-bottom-4 duration-300">
        <h2 class="text-2xl font-bold mb-6 text-gray-800">üìß G·ª≠i l·ªãch l√†m qua email</h2>
        
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">Email ng∆∞·ªùi nh·∫≠n <span class="text-red-500">*</span></label>
            <input 
                type="email" 
                id="recipientEmail" 
                placeholder="example@gmail.com" 
                class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition"
            >
            <p id="emailError" class="text-red-500 text-sm mt-1 hidden"></p>
        </div>

        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">Ghi ch√∫ (t√πy ch·ªçn)</label>
            <textarea 
                id="emailNote" 
                placeholder="Nh·∫≠p ghi ch√∫ th√™m..." 
                rows="3"
                class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus: ring-2 focus:ring-purple-500 focus:border-transparent transition resize-none"
            ></textarea>
        </div>

        <div class="mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
            <p class="text-sm text-blue-800">
                <strong>‚ÑπÔ∏è Th√¥ng tin:</strong><br>
                Email s·∫Ω ch·ª©a b·∫£ng l·ªãch l√†m chi ti·∫øt cho tu·∫ßn n√†y. 
            </p>
        </div>

        <div class="flex gap-3 justify-end">
            <button 
                onclick="closeEmailModal()" 
                class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-2 rounded-lg font-medium transition duration-200"
            >
                H·ªßy
            </button>
            <button 
                onclick="confirmSendEmail()" 
                id="sendEmailBtn"
                class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium transition duration-200 flex items-center gap-2"
            >
                <span id="sendBtnText">G·ª≠i ngay</span>
                <span id="sendBtnSpinner" class="hidden animate-spin">‚è≥</span>
            </button>
        </div>
    </div>
</div>

<!-- Toast Notification -->
<div 
    id="toastNotification" 
    class="hidden fixed bottom-4 right-4 px-6 py-4 rounded-lg shadow-lg text-white font-medium max-w-sm z-50 animate-in fade-in slide-in-from-bottom-4 duration-300"
>
    <span id="toastMessage"></span>
</div>

<!-- Modal Th√™m/S·ª≠a Th∆∞·ªüng Ph·∫°t -->
<div id="thuongPhatModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm items-center justify-center z-50 hidden">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md mx-4 transform transition-all">
        <!-- Header -->
        <div class="bg-gradient-to-r from-purple-600 to-purple-700 text-white px-6 py-4 rounded-t-2xl">
            <div class="flex items-center justify-between">
                <h3 id="thuongPhatModalTitle" class="text-xl font-bold">Th√™m th∆∞·ªüng/ph·∫°t</h3>
                <button onclick="closeThuongPhatModal()" class="text-white/80 hover:text-white transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Form -->
        <form id="thuongPhatForm" class="p-6 space-y-5">
            <input type="hidden" id="thuongPhatId">

            <!-- B·∫£ng l∆∞∆°ng -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">
                    B·∫£ng l∆∞∆°ng <span class="text-red-500">*</span>
                </label>
                <select id="thuongPhatLuongId" required
                    class="w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">
                    <option value="">-- Ch·ªçn b·∫£ng l∆∞∆°ng --</option>
                </select>
            </div>

            <!-- Lo·∫°i -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">
                    Lo·∫°i <span class="text-red-500">*</span>
                </label>
                <select id="thuongPhatLoai" required
                    class="w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">
                    <option value="Thuong">üéÅ Th∆∞·ªüng</option>
                    <option value="Phat">‚ö†Ô∏è Ph·∫°t</option>
                </select>
            </div>

            <!-- S·ªë ti·ªÅn -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">
                    S·ªë ti·ªÅn <span class="text-red-500">*</span>
                </label>
                <div class="relative">
                    <input type="number" id="thuongPhatSoTien" required min="0" step="10000" 
                        placeholder="VD: 500000"
                        class="w-full border border-gray-300 rounded-lg px-4 py-2.5 pr-12 text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">
                    <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 text-sm">VNƒê</span>
                </div>
            </div>

            <!-- L√Ω do -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">L√Ω do</label>
                <textarea id="thuongPhatLyDo" rows="3" 
                    placeholder="Nh·∫≠p l√Ω do th∆∞·ªüng/ph·∫°t..."
                    class="w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all resize-none"></textarea>
            </div>

            <!-- Ng√†y √°p d·ª•ng -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">Ng√†y √°p d·ª•ng</label>
                <input type="date" id="thuongPhatNgay" 
                    class="w-full border border-gray-300 rounded-lg px-4 py-2.5 text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all">
            </div>

            <!-- Buttons -->
            <div class="flex gap-3 pt-4">
                <button type="submit"
                    class="flex-1 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-2.5 rounded-lg font-medium transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    L∆∞u
                </button>
                <button type="button" onclick="closeThuongPhatModal()"
                    class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                    H·ªßy
                </button>
            </div>
        </form>
    </div>
</div>


<!-- Modal Th√™m/S·ª≠a L∆∞∆°ng -->
<div id="luongModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm items-center justify-center z-50 hidden">
    <div class="bg-white rounded-2xl shadow-2xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto">
        <!-- Header -->
        <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-4 rounded-t-2xl">
            <div class="flex items-center justify-between">
                <h3 id="luongModalTitle" class="text-xl font-bold">Th√™m b·∫£ng l∆∞∆°ng</h3>
                <button onclick="closeLuongModal()" class="text-white/80 hover:text-white">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Form -->
        <form id="luongForm" class="p-6 space-y-4">
            <input type="hidden" id="luongId">

            <!-- Nh√¢n vi√™n -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">
                    Nh√¢n vi√™n <span class="text-red-500">*</span>
                </label>
                <select id="luongNhanVienId" required
                    class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-orange-500 focus:border-orange-500">
                    <option value="">-- Ch·ªçn nh√¢n vi√™n --</option>
                </select>
            </div>

            <!-- Th√°ng/NƒÉm -->
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">
                        Th√°ng <span class="text-red-500">*</span>
                    </label>
                    <select id="luongThang" required
                        class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-orange-500">
                        <option value="1">Th√°ng 1</option>
                        <option value="2">Th√°ng 2</option>
                        <option value="3">Th√°ng 3</option>
                        <option value="4">Th√°ng 4</option>
                        <option value="5">Th√°ng 5</option>
                        <option value="6">Th√°ng 6</option>
                        <option value="7">Th√°ng 7</option>
                        <option value="8">Th√°ng 8</option>
                        <option value="9">Th√°ng 9</option>
                        <option value="10">Th√°ng 10</option>
                        <option value="11">Th√°ng 11</option>
                        <option value="12">Th√°ng 12</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">
                        NƒÉm <span class="text-red-500">*</span>
                    </label>
                    <input type="number" id="luongNam" required min="2020" max="2030"
                        class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-orange-500">
                </div>
            </div>

            <!-- L∆∞∆°ng c∆° b·∫£n -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">
                    L∆∞∆°ng c∆° b·∫£n <span class="text-red-500">*</span>
                </label>
                <div class="relative">
                    <input type="number" id="luongCoBan" required min="0" step="100000" placeholder="VD: 8000000"
                        class="w-full border border-gray-300 rounded-lg px-4 py-2.5 pr-12 focus:ring-2 focus:ring-orange-500">
                    <span class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 text-sm">VNƒê</span>
                </div>
            </div>

            <!-- S·ªë ca l√†m -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1.5">S·ªë ca l√†m</label>
                <input type="number" id="luongSoCaLam" min="0" value="0"
                    class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-2 focus:ring-orange-500">
            </div>

            <!-- Th∆∞·ªüng/Ph·∫°t -->
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">T·ªïng th∆∞·ªüng</label>
                    <input type="number" id="luongTongThuong" min="0" step="10000" value="0"
                        class="w-full border border-gray-300 rounded-lg px-4 py-2.5 text-green-600 focus:ring-2 focus:ring-green-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1.5">T·ªïng ph·∫°t</label>
                    <input type="number" id="luongTongPhat" min="0" step="10000" value="0"
                        class="w-full border border-gray-300 rounded-lg px-4 py-2.5 text-red-600 focus:ring-2 focus:ring-red-500">
                </div>
            </div>

            <!-- Preview t·ªïng l∆∞∆°ng -->
            <div class="bg-gradient-to-r from-orange-50 to-yellow-50 p-4 rounded-xl border border-orange-200">
                <p class="text-sm text-gray-600 mb-1">üí∞ T·ªïng l∆∞∆°ng d·ª± ki·∫øn:</p>
                <p id="luongTongLuongPreview" class="text-2xl font-bold text-green-600">0ƒë</p>
                <p class="text-xs text-gray-500 mt-1">= L∆∞∆°ng c∆° b·∫£n + Th∆∞·ªüng - Ph·∫°t</p>
            </div>

            <!-- Buttons -->
            <div class="flex gap-3 pt-4">
                <button type="submit"
                    class="flex-1 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white py-2.5 rounded-lg font-medium transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    L∆∞u
                </button>
                <button type="button" onclick="closeLuongModal()"
                    class="flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                    H·ªßy
                </button>
            </div>
        </form>
    </div>
</div>
<!-- Modal Chi ti·∫øt ca -->
<!-- <div id="shiftDetailModal" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-2xl max-h-[85vh] overflow-hidden mx-4">
        <div class="bg-blue-600 text-white px-4 py-3 flex justify-between items-center">
            <h3 id="shiftDetailTitle" class="text-lg font-bold">Chi ti·∫øt ca l√†m</h3>
            <button onclick="closeShiftDetailModal()" class="text-white hover:text-gray-200 text-2xl">&times;</button>
        </div>
        <div id="shiftDetailContent" class="p-4 overflow-y-auto max-h-[calc(85vh-60px)]"> -->
            <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c render b·∫±ng JS -->
        <!-- </div>
    </div>
</div> -->

<script>
// ============================================
// TOAST NOTIFICATION SYSTEM
// ============================================
window.Toast = {
  container: null,

  init() {
    if (!this.container) {
      this.container = document.getElementById('toastContainer');
    }
  },

  show(message, type = 'info', duration = 3000) {
    this.init();

    const icons = {
      success: '‚úì',
      error: '‚úï',
      warning: '‚ö†',
      info: '‚Ñπ'
    };

    const toast = document.createElement('div');
    toast.className = `toast toast-${type}`;
    toast.innerHTML = `
      <div class="toast-icon">${icons[type]}</div>
      <div class="toast-content">${message}</div>
      <button class="toast-close">√ó</button>
    `;

    this.container.appendChild(toast);

    const closeBtn = toast.querySelector('.toast-close');
    closeBtn.addEventListener('click', () => this.remove(toast));

    setTimeout(() => this.remove(toast), duration);
  },

  remove(toast) {
    toast.classList.add('toast-exit');
    setTimeout(() => toast.remove(), 300);
  },

  success(message, duration) {
    this.show(message, 'success', duration);
  },

  error(message, duration) {
    this.show(message, 'error', duration);
  },

  warning(message, duration) {
    this.show(message, 'warning', duration);
  },

  info(message, duration) {
    this.show(message, 'info', duration);
  }
};
</script>

<script src="/js/admin.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  if (typeof window.revenueModule === "undefined") {
    window.revenueModule = {
      revenueChart: null,

      allRevenues: [], // t·ª´ doanhthuca
      allOrders: [],   // t·ª´ donhang

      // ƒê·ªïi mapping n√†y theo DB ca_lam c·ªßa b·∫°n
      // V√≠ d·ª•: ca_id=1 s√°ng, ca_id=2 t·ªëi
      SHIFT_MAP: { 1: "morning", 2: "evening" },

      formatCurrency(amount) {
        return new Intl.NumberFormat("vi-VN", {
          style: "currency",
          currency: "VND",
        }).format(amount);
      },

      getWeekStart(date) {
        const d = new Date(date);
        const day = d.getDay();
        const diff = d.getDate() - day + (day === 0 ? -6 : 1);
        return new Date(d.setDate(diff));
      },

      getDateRange(filterType) {
        const today = new Date();
        let startDate,
          endDate = new Date(today);

        switch (filterType) {
          case "day":
            startDate = new Date(today);
            break;
          case "week":
            startDate = this.getWeekStart(today);
            break;
          case "month":
            startDate = new Date(today.getFullYear(), today.getMonth(), 1);
            break;
          case "year":
            startDate = new Date(today.getFullYear(), 0, 1);
            break;
          default:
            return null;
        }

        return {
          startDate: new Date(startDate.setHours(0, 0, 0, 0)),
          endDate: new Date(endDate.setHours(23, 59, 59, 999)),
        };
      },

      // ===== SHIFT helpers =====
      getShiftFromCaId(ca_id) {
        return this.SHIFT_MAP[Number(ca_id)] || "outside";
      },

      // Donhang th∆∞·ªùng kh√¥ng c√≥ ca_id, n√™n suy ra ca theo gi·ªù c·ªßa ngay_dat
      getShiftFromOrderDate(dateStr) {
        const hour = new Date(dateStr).getHours();
        if (hour >= 8 && hour < 14) return "morning";
        if (hour >= 14 && hour < 20) return "evening";
        return "outside";
      },

      getShiftLabel(shift) {
        const labels = {
          morning: "Ca s√°ng",
          evening: "Ca t·ªëi",
          outside: "Ngo√†i gi·ªù",
        };
        return labels[shift] || shift;
      },

      // ===== Filter data =====
      filterRevenues(revenues, startDate, endDate, shift = "all") {
        return revenues.filter((row) => {
          const rowDate = new Date(row.ngay);
          const dateInRange = rowDate >= startDate && rowDate <= endDate;

          if (shift === "all") return dateInRange;

          const rowShift = this.getShiftFromCaId(row.ca_id);
          return dateInRange && rowShift === shift;
        });
      },

      filterOrders(orders, startDate, endDate, shift = "all") {
        return orders.filter((order) => {
          const d = new Date(order.ngay_dat);
          const dateInRange = d >= startDate && d <= endDate;

          if (shift === "all") return dateInRange;

          const orderShift = this.getShiftFromOrderDate(order.ngay_dat);
          return dateInRange && orderShift === shift;
        });
      },

      // ===== Group by date (join doanhthu + order count) =====
      // key theo yyyy-mm-dd ƒë·ªÉ join ch·∫Øc ch·∫Øn (kh√¥ng ph·ª• thu·ªôc locale)
      toDateKey(dateObj) {
        const y = dateObj.getFullYear();
        const m = String(dateObj.getMonth() + 1).padStart(2, "0");
        const d = String(dateObj.getDate()).padStart(2, "0");
        return `${y}-${m}-${d}`;
      },

      // Nh√≥m doanh thu theo ng√†y
      groupRevenueByDate(revenues) {
        const map = {}; // {dateKey: { revenue, byShift }}
        revenues.forEach((row) => {
          const d = new Date(row.ngay);
          const key = this.toDateKey(d);

          if (!map[key]) {
            map[key] = {
              dateKey: key,
              label: d.toLocaleDateString("vi-VN"),
              revenue: 0,
              byShiftRevenue: { morning: 0, evening: 0, outside: 0 },
            };
          }

          const value = parseInt(row.tong_doanh_thu || "0", 10);
          map[key].revenue += value;

          const shift = this.getShiftFromCaId(row.ca_id);
          map[key].byShiftRevenue[shift] =
            (map[key].byShiftRevenue[shift] || 0) + value;
        });
        return map;
      },

      // Nh√≥m ƒë∆°n h√†ng theo ng√†y: ƒë·∫øm s·ªë ƒë∆°n + ƒë·∫øm ƒë√£ thanh to√°n + t·ªïng ti·ªÅn (n·∫øu c√≥)
      groupOrdersByDate(orders) {
        const map = {}; // {dateKey: { count, paid, totalValue, byShiftCount }}
        orders.forEach((o) => {
          const d = new Date(o.ngay_dat);
          const key = this.toDateKey(d);

          if (!map[key]) {
            map[key] = {
              dateKey: key,
              label: d.toLocaleDateString("vi-VN"),
              count: 0,
              paid: 0,
              totalValue: 0,
              byShiftCount: { morning: 0, evening: 0, outside: 0 },
            };
          }

          map[key].count += 1;

          // paid (n·∫øu c√≥ tr∆∞·ªùng trang_thai nh∆∞ code c≈©)
          if (o.trang_thai === "ƒê√£ thanh to√°n") map[key].paid += 1;

          // t·ªïng ti·ªÅn ƒë∆°n (n·∫øu API c√≥ tien_sau_giam)
          const val = parseInt(o.tien_sau_giam || "0", 10);
          map[key].totalValue += Number.isFinite(val) ? val : 0;

          const shift = this.getShiftFromOrderDate(o.ngay_dat);
          map[key].byShiftCount[shift] =
            (map[key].byShiftCount[shift] || 0) + 1;
        });
        return map;
      },

      // Join theo ng√†y: ∆∞u ti√™n l·∫•y label t·ª´ revenue n·∫øu c√≥, kh√¥ng th√¨ t·ª´ orders
      buildDailyRows(filteredRevenues, filteredOrders) {
        const revMap = this.groupRevenueByDate(filteredRevenues);
        const ordMap = this.groupOrdersByDate(filteredOrders);

        const allKeys = new Set([
          ...Object.keys(revMap),
          ...Object.keys(ordMap),
        ]);

        const rows = Array.from(allKeys).map((key) => {
          const r = revMap[key];
          const o = ordMap[key];

          return {
            dateKey: key,
            label: r?.label || o?.label || key,
            revenue: r?.revenue || 0,
            ordersCount: o?.count || 0,
            paidCount: o?.paid || 0,
            byShiftRevenue: r?.byShiftRevenue || {
              morning: 0,
              evening: 0,
              outside: 0,
            },
            byShiftCount: o?.byShiftCount || {
              morning: 0,
              evening: 0,
              outside: 0,
            },
          };
        });

        // sort theo dateKey yyyy-mm-dd
        rows.sort((a, b) => new Date(a.dateKey) - new Date(b.dateKey));
        return rows;
      },

      // ===== UI updates =====
      updateChart(dailyRows) {
        const labels = dailyRows.map((x) => x.label);
        const values = dailyRows.map((x) => x.revenue);

        const ctx = document.getElementById("revenue-chart");
        if (!ctx) return;
        const chartContext = ctx.getContext("2d");

        if (this.revenueChart) this.revenueChart.destroy();

        this.revenueChart = new Chart(chartContext, {
          type: "bar",
          data: {
            labels,
            datasets: [
              {
                label: "Doanh thu (ƒë)",
                data: values,
                backgroundColor: "rgba(59, 130, 246, 0.7)",
                borderColor: "rgba(59, 130, 246, 1)",
                borderWidth: 1,
                borderRadius: 4,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: true, position: "top" },
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: (value) => value.toLocaleString("vi-VN") + " ƒë",
                },
              },
            },
          },
        });
      },

      updateStats(filteredOrders, dailyRows) {
        const totalRevenue = dailyRows.reduce((s, x) => s + x.revenue, 0);
        const totalOrders = filteredOrders.length;

        // N·∫øu mu·ªën avg theo doanh thu/ƒë∆°n (d√πng doanhthu / s·ªë ƒë∆°n)
        const avgRevenue = totalOrders > 0 ? Math.round(totalRevenue / totalOrders) : 0;

        const paidOrders = filteredOrders.filter((o) => o.trang_thai === "ƒê√£ thanh to√°n").length;

        const totalRevenueEl = document.getElementById("total-revenue");
        const totalOrdersEl = document.getElementById("total-orders");
        const avgRevenueEl = document.getElementById("avg-revenue");
        const paidOrdersEl = document.getElementById("paid-orders");

        if (totalRevenueEl) totalRevenueEl.textContent = this.formatCurrency(totalRevenue);
        if (totalOrdersEl) totalOrdersEl.textContent = totalOrders;

        // N·∫øu donhang kh√¥ng c√≥ trang_thai/paid th√¨ s·∫Ω ra 0 (kh√¥ng l·ªói)
        if (avgRevenueEl) avgRevenueEl.textContent = this.formatCurrency(avgRevenue);
        if (paidOrdersEl) paidOrdersEl.textContent = paidOrders;
      },

      updateTable(dailyRows) {
        const tbody = document.getElementById("revenue-table-body");
        if (!tbody) return;

        if (dailyRows.length === 0) {
          tbody.innerHTML = `
            <tr>
              <td colspan="4" class="px-4 py-2 text-center text-gray-500">Kh√¥ng c√≥ d·ªØ li·ªáu</td>
            </tr>
          `;
          return;
        }

        tbody.innerHTML = dailyRows
          .map((g) => {
            // Th√¥ng tin ca: n·∫øu ƒëang filter theo 1 ca, rows ƒë√£ l·ªçc theo ca r·ªìi,
            // nh∆∞ng m√¨nh v·∫´n show breakdown ƒë·ªÉ d·ªÖ nh√¨n
            const shiftInfo = [
              ["morning", "Ca s√°ng"],
              ["evening", "Ca t·ªëi"],
              ["outside", "Ngo√†i gi·ªù"],
            ]
              .map(([k, label]) => {
                const c = g.byShiftCount?.[k] || 0;
                const rev = g.byShiftRevenue?.[k] || 0;
                if (c === 0 && rev === 0) return null;
                return `${label}: ${c} ƒë∆°n / ${this.formatCurrency(rev)}`;
              })
              .filter(Boolean)
              .join(" | ");

            return `
              <tr class="border-b hover:bg-gray-50">
                <td class="px-4 py-2">${g.label}</td>
                <td class="px-4 py-2">${g.ordersCount}</td>
                <td class="px-4 py-2 font-semibold text-green-600">${this.formatCurrency(g.revenue)}</td>
                <td class="px-4 py-2 text-xs">${shiftInfo || "‚Äî"}</td>
              </tr>
            `;
          })
          .join("");
      },

      // ===== Apply filter (2 ngu·ªìn) =====
      applyFilter() {
        const filterType = document.getElementById("filter-type").value;
        const shift = document.getElementById("filter-shift").value;

        let startDate, endDate;

        if (filterType === "custom") {
          const s = document.getElementById("start-date").value;
          const e = document.getElementById("end-date").value;

          if (!s || !e) {
            alert("Vui l√≤ng ch·ªçn kho·∫£ng ng√†y");
            return;
          }

          startDate = new Date(s + "T00:00:00");
          endDate = new Date(e + "T23:59:59");
        } else {
          const range = this.getDateRange(filterType);
          startDate = range.startDate;
          endDate = range.endDate;
        }

        const filteredRevenues = this.filterRevenues(
          this.allRevenues,
          startDate,
          endDate,
          shift
        );

        const filteredOrders = this.filterOrders(
          this.allOrders,
          startDate,
          endDate,
          shift
        );

        const dailyRows = this.buildDailyRows(filteredRevenues, filteredOrders);

        this.updateStats(filteredOrders, dailyRows);
        this.updateChart(dailyRows);
        this.updateTable(dailyRows);
      },

      // ===== Load BOTH APIs =====
      async loadData() {
        try {
          const [revRes, orderRes] = await Promise.all([
            fetch("http://localhost:3000/doanhthuca/laytatca"),
            fetch("http://localhost:3000/donhang/laytatca"),
          ]);

          const revJson = await revRes.json();
          const orderJson = await orderRes.json();

          // doanhthuca tr·∫£ { thanh_cong, du_lieu }
          this.allRevenues = Array.isArray(revJson?.du_lieu) ? revJson.du_lieu : [];

          // donhang: b·∫°n ƒëang d√πng d·∫°ng n√†o m√¨nh support 2 ki·ªÉu:
          // 1) { thanh_cong, du_lieu: [...] }
          // 2) tr·∫£ th·∫≥ng m·∫£ng [...]
          if (Array.isArray(orderJson?.du_lieu)) this.allOrders = orderJson.du_lieu;
          else if (Array.isArray(orderJson)) this.allOrders = orderJson;
          else this.allOrders = [];

          this.applyFilter();
        } catch (err) {
          console.error("L·ªói t·∫£i d·ªØ li·ªáu:", err);
        }
      },

      init() {
        const filterTypeEl = document.getElementById("filter-type");
        const filterShiftEl = document.getElementById("filter-shift");
        const btnFilterEl = document.getElementById("btn-filter");
        const customDateRange = document.getElementById("custom-date-range");

        if (filterTypeEl) {
          filterTypeEl.addEventListener("change", () => {
            if (filterTypeEl.value === "custom") {
              customDateRange?.classList.remove("hidden");
            } else {
              customDateRange?.classList.add("hidden");
              this.applyFilter();
            }
          });
        }

        if (filterShiftEl) filterShiftEl.addEventListener("change", () => this.applyFilter());
        if (btnFilterEl) btnFilterEl.addEventListener("click", () => this.applyFilter());

        this.loadData();
      },
    };

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", () => window.revenueModule.init());
    } else {
      window.revenueModule.init();
    }
  }
</script>




</body>
</html>